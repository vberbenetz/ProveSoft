<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-9">
        <h1> All Processes</h1>
    </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-content">
                    <div class="col-md-12 margin-bottom-30">
                        <button ui-sref="process-viewer.document-creation" class="btn btn-lg btn-primary">New Document +</button>
                    </div>

                    <h4 class="margin-left-20">
                        <!-- 2,160 results found for: <span class="text-navy">“Admin Theme”</span> -->
                    </h4>

                    <!-- Search results table -->
                    <div class="col-md-8">
                        <div class="search-form">
                            <form>
                                <div class="input-group">
                                    <input ng-model="searchString" type="text" placeholder="Search All Documents.." name="search" class="form-control input-lg">

                                    <div class="input-group-btn">
                                        <button class="btn btn-lg btn-primary" ng-click="executeSearch()">
                                            Search
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <div ng-show="noResultsFound" class="margin-top-30">
                            <h3>No Results Found</h3>
                        </div>

                        <div ng-hide="noResultsFound" class="table-responsive margin-top-30">
                            <table class="table table-hover issue-tracker">
                                <colgroup>
                                    <col style="width:5%" />
                                    <col style="width:15%" />
                                    <col style="width:15%" />
                                    <col style="width:15%" />
                                    <col style="width:10%" />
                                    <col style="width:15%" />
                                    <col style="width:15%" />
                                    <col style="width:10%" />
                                </colgroup>
                                <thead>
                                <tr>
                                    <th></th>
                                    <th class="text-left"><h3>ID</h3></th>
                                    <th class="text-left"><h3>Title</h3></th>
                                    <th class="text-left"><h3>Owner</h3></th>
                                    <th class="text-left"><h3>Revision</h3></th>
                                    <th class="text-left"><h3>State</h3></th>
                                    <th class="text-left"><h3>Release Date</h3></th>
                                    <th></th>
                                </tr>
                                </thead>
                            </table>
                        </div>

                        <accordion close-other="true">
                            <accordion-group ng-repeat="n in documentSearchResults" is-open="n.active" ng-class="{'accordion-group-active' : n.active}">
                                <accordion-heading>
                                    <div class="row">
                                        <div class="col-md-12" ng-click="getRevisions(n.id)">
                                            <table class="table">
                                                <colgroup>
                                                    <col style="width:2%" />
                                                    <col style="width:15%" />
                                                    <col style="width:18%" />
                                                    <col style="width:15%" />
                                                    <col style="width:10%" />
                                                    <col style="width:15%" />
                                                    <col style="width:15%" />
                                                    <col style="width:10%" />
                                                </colgroup>
                                                <tbody>
                                                <tr>
                                                    <td>
                                                        <button class="btn btn-xs btn-rounded btn-primary">
                                                            <span class="fa fa-plus" ng-class="{ 'fa-minus' : n.active}"></span>
                                                        </button>
                                                    </td>
                                                    <td>{{ n.id }}</td>
                                                    <td>{{ n.title }}</td>
                                                    <td>{{ n.organization.name }}</td>
                                                    <td>{{ n.revision }}</td>
                                                    <td ng-if="n.state!='Changing'">
                                                        {{ n.state }}
                                                    </td>
                                                    <td ng-if="n.state=='Changing'">
                                                        <p class="text-danger"><strong>Changing...</strong></p>
                                                        <button class="btn btn-primary btn-sm" ng-click="openStepsModal(n)">
                                                            <span class="fa fa-plus"></span>&nbsp;See Details
                                                        </button>
                                                    </td>
                                                    <td>{{ n.date }}</td>
                                                    <td>
                                                        <div class="text-right">
                                                            <button ng-disabled="n.state=='Changing'" ui-sref="process-viewer.document-revision({documentId: n.id})" class="btn btn-lg btn-warning" type="button">
                                                                <span class="fa fa-pencil"></span>
                                                            </button>
                                                        </div>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </accordion-heading>
                                <div class="table-responsive" ng-if="lastFetchedRevisions==n.id">
                                    <table class="table table-hover issue-tracker">
                                        <thead>
                                        <tr>
                                            <th>Revision</th>
                                            <th>Reason For Change</th>
                                            <th>Changed By</th>
                                            <th>Change Date</th>
                                            <th class="text-center">Document Download</th>
                                            <th class="text-center">Redline Download</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="r in revisions" ng-class="{ 'row-danger' : n.state=='Changing' && $index==0}">
                                                <td>{{ r.key.revisionId }}</td>
                                                <td>{{ r.changeReason }}</td>
                                                <td>{{ r.changeUserId }}</td>
                                                <td>{{ r.changeDate }}</td>
                                                <td class="text-center">
                                                    <a target="_blank" href="" class="btn btn-success" ng-href="{{ '/resource/download?documentId=' + r.key.documentId + '&revisionId=' + r.key.revisionId }}">
                                                        <span class="fa fa-file"></span>
                                                    </a>
                                                </td>
                                                <td class="text-center">
                                                    <a ng-disabled="!r.redlineDocPresent" ng-hide="r.key.revisionId=='A'" href="" class="btn btn-danger" ng-href="{{ '/resource/download?documentId=' + r.key.documentId + '&revisionId=' + r.key.revisionId + '&isRedline=true' }}">
                                                        <span class="fa fa-file"></span>
                                                    </a>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </accordion-group>
                        </accordion>

                        <hr/>

                        <div class="text-center">
                            <div class="btn-group">
                                <button class="btn btn-white" type="button"><i class="fa fa-chevron-left"></i></button>
                                <button class="btn btn-white">1</button>
                                <button class="btn btn-white">2</button>
                                <button class="btn btn-white">3</button>
                                <button class="btn btn-white">4</button>
                                <button class="btn btn-white">5</button>
                                <button class="btn btn-white">6</button>
                                <button class="btn btn-white">7</button>
                                <button class="btn btn-white" type="button"><i class="fa fa-chevron-right"></i></button>
                            </div>
                        </div>
                    </div>
                    <!-- End search results table -->

                    <!-- Timeline -->
                    <!--
                    <div class="col-md-4">
                        <div class="ibox-content inspinia-timeline">
                            <div class="timeline-item">
                                <div class="row">
                                    <div class="col-xs-3 date">
                                        <i class="fa fa-briefcase"></i>
                                        6:00 am
                                        <br/>
                                        <small class="text-navy">2 hour ago</small>
                                    </div>
                                    <div class="col-xs-7 content no-top-border">
                                        <p class="m-b-xs"><strong>Meeting</strong></p>

                                        <p>Conference on the sales results for the previous year. Monica please examine sales trends in marketing and products. Below please find the current status of the
                                            sale.</p>

                                        <p>
                                            <bar-chart data="main.BarChart2.data" options="main.BarChart2.options"></bar-chart>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    -->
                    <!-- End timeline -->

                </div>
            </div>
        </div>
    </div>
</div>
