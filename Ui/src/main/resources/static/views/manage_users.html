<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-xs-12">
        <h1>Manage Users</h1>
    </div>
</div>
<div class="wrapper wrapper-content  animated fadeInRight">
    <div class="row">
        <div class="col-lg-6">
            <div class="ibox">
                <div class="ibox-content">
                    <div class="clients-list">
                        <ul class="nav nav-tabs">
                            <li ng-class="{'active' : tab == 1}"><a ng-click="tab = 1; rightPanel.view = 'new-user'" ng-init="tab = 1"><i class="fa fa-users"></i> Users</a></li>
                            <li ng-class="{'active' : tab == 2}"><a ng-click="tab = 2; rightPanel.view = 'new-org'"><i class="fa fa-sitemap"></i> Organizations</a></li>
                            <li ng-class="{'active' : tab == 3}"><a ng-click="tab = 3; rightPanel.view = 'new-role'; loadOrgs();"><i class="fa fa-user-secret"></i> Roles</a></li>
                        </ul>
                        <div class="tab-content">
                            <div id="tab-1" class="tab-pane active" ng-show="tab == 1">

                                <div class="margin-top-25 margin-bottom-20">
                                    <h3>
                                        <a href="" ng-click="rightPanel.view='new-user'">
                                            <button class="btn btn-primary">
                                                <i class="fa fa-plus"></i>
                                            </button>
                                            &nbsp;Add New User
                                        </a>
                                    </h3>
                                </div>

                                <div class="margin-top-25 margin-bottom-20">
                                    <form role="search">
                                        <div class="form-group">
                                            <div class="input-group">
                                                <input type="text" placeholder="Start typing to find user..." class="form-control" name="userSearch" id="userSearch">
                                                <span class="input-group-btn">
                                                    <button class="btn btn-primary">
                                                        <i class="fa fa-search"></i>
                                                    </button>
                                                </span>
                                            </div>
                                        </div>
                                    </form>
                                </div>

                                <div class="full-height-scroll" full-scroll>
                                    <div class="table-responsive">
                                        <table class="table table-striped table-hover">
                                            <thead>
                                            <tr>
                                                <th>First Name</th>
                                                <th>Last Name</th>
                                                <th>Email</th>
                                                <th>Primary Organization</th>
                                                <th></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="n in users">
                                                <td><a href="" ng-click="changeRightPanel('user', n)" class="client-link">{{ n.firstName }}</a></td>
                                                <td><a href="" ng-click="changeRightPanel('user', n)" class="client-link">{{ n.lastName }}</a></td>
                                                <td><a href="" ng-click="changeRightPanel('user', n)" class="client-link">{{ n.email }}</a></td>
                                                <td>{{ n.primaryOrgName }}</td>
                                                <td>
                                                    <button ng-click="changeRightPanel('user', n)" class="btn btn-xs btn-warning" type="button">
                                                        <i class="fa fa-pencil"></i> Edit
                                                    </button>
                                                    <button class="btn btn-xs btn-danger" type="button">
                                                        <i class="fa fa-times"></i> Delete
                                                    </button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div id="tab-2" class="tab-pane active" ng-show="tab == 2">

                                <div class="margin-top-25 margin-bottom-20">
                                    <h3>
                                        <a href="" ng-click="rightPanel.view='new-org'">
                                            <button class="btn btn-primary">
                                                <i class="fa fa-plus"></i>
                                            </button>
                                            &nbsp;Add New Organization
                                        </a>
                                    </h3>
                                </div>

                                <div class="full-height-scroll" full-scroll>
                                    <div class="table-responsive">
                                        <table class="table table-striped table-hover">
                                            <thead>
                                            <tr>
                                                <th>Organization</th>
                                                <th>Description</th>
                                                <th></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="n in organizations">
                                                <td><a ng-click="changeRightPanel('org', n)" class="client-link">{{ n.name }}</a></td>
                                                <td><p class="org-desc">{{ n.description }}</p></td>
                                                <td>
                                                    <button ng-click="changeRightPanel('org', n)" class="btn btn-xs btn-warning" type="button">
                                                        <i class="fa fa-pencil"></i> Edit
                                                    </button>
                                                    <button class="btn btn-xs btn-danger" type="button">
                                                        <i class="fa fa-times"></i> Delete
                                                    </button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div id="tab-3" class="tab-pane active" ng-show="tab == 3">

                                <div class="margin-top-25 margin-bottom-20">
                                    <h3>
                                        <a href="" ng-click="rightPanel.view = 'new-role'">
                                            <button class="btn btn-primary">
                                                <i class="fa fa-plus"></i>
                                            </button>
                                            &nbsp;Add New Role
                                        </a>
                                    </h3>
                                </div>

                                <div class="full-height-scroll" full-scroll>
                                    <div class="ibox float-e-margins">
                                        <div class="ibox-content no-padding">
                                            <ul class="list-group">
                                                <li ng-repeat="n in roles" class="list-group-item">
                                                    <h4>
                                                        <a ng-click="changeRightPanel('role', formatRole(n))" class="client-link">{{ n.name }}</a>
                                                        <span class="pull-right">
                                                            <button ng-click="changeRightPanel('role', formatRole(n))" class="btn btn-sm btn-warning" type="button">
                                                                <i class="fa fa-pencil"></i> Edit
                                                            </button>
                                                            &nbsp;&nbsp;
                                                            <button class="btn btn-sm btn-danger" type="button">
                                                                <i class="fa fa-times"></i> Delete
                                                            </button>
                                                        </span>
                                                    </h4>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="ibox ">

                <div class="ibox-content">
                    <div class="tab-content">

                        <div id="new-user" class="tab-pane active" ng-show="rightPanel.view == 'new-user'">
                            <div class="row m-b-lg">
                                <div class="col-lg-4">
                                    <h2>New User</h2>

                                    <div class="m-b-sm">
                                        <img alt="image" class="img-circle admin-panel-avatar" src="img/default_profile.png" />
                                    </div>
                                </div>
                                <div class="col-lg-8 margin-top-30">
                                    <h3 class="text-primary">
                                        6 Licenses Remaining
                                    </h3>
                                </div>
                            </div>
                            <div class="full-height-scroll" full-scroll>
                                <form class="form-horizontal">
                                    <div class="form-group">

                                        <label class="col-sm-2 control-label">
                                            First Name
                                        </label>
                                        <div class="col-sm-10 margin-bottom-30">
                                            <input ng-model="newUser.firstName" class="form-control" type="text" />
                                        </div>

                                        <label class="col-sm-2 control-label">
                                            Last Name
                                        </label>
                                        <div class="col-sm-10 margin-bottom-30">
                                            <input ng-model="newUser.lastName" class="form-control" type="text" />
                                        </div>

                                        <label class="col-sm-2 control-label">
                                            Title
                                        </label>
                                        <div class="col-sm-10 margin-bottom-30">
                                            <input ng-model="newUser.title" class="form-control" type="text" />
                                        </div>

                                        <label class="col-sm-2 control-label">
                                            Email
                                        </label>
                                        <div class="col-sm-10 margin-bottom-30">
                                            <input ng-model="newUser.email" class="form-control" type="text" />
                                        </div>

                                        <div class="row margin-bottom-30 padding-left-15">
                                            <label class="col-sm-2 control-label">
                                                User Roles
                                            </label>
                                            <div class="col-lg-6 m-l">
                                                <select class="form-control m-l-n" multiple="multiple" ng-model="newUser.roles" ng-options="r.name for r in roles">
                                                </select>
                                            </div>
                                        </div>

                                        <div class="row margin-bottom-30 padding-left-15">
                                            <label class="col-sm-2 control-label">
                                                Primary Organization
                                            </label>
                                            <div class="col-lg-6">
                                                <select class="form-control" name="organization" ng-model="newUser.primaryOrg" ng-options="o.name for o in organizations">
                                                </select>
                                            </div>
                                        </div>

                                        <div class="row margin-bottom-30 padding-left-15">
                                            <label class="col-sm-2 control-label">
                                                Additional Organizations
                                            </label>
                                            <div class="col-lg-6">
                                                <select class="form-control" multiple="multiple" ng-model="newUser.additionalOrgs" ng-options="o.name for o in organizations">
                                                </select>
                                            </div>
                                        </div>

                                        <div class="col-sm-6 col-sm-offset-2 margin-top-20">
                                            <button ng-click="createNewUser()" class="btn btn-block btn-primary" type="button">
                                                Add User
                                            </button>
                                        </div>

                                    </div>
                                </form>
                            </div>
                        </div>

                        <div id="user" class="tab-pane active" ng-show="rightPanel.view == 'user'">
                            <div class="row m-b-lg">
                                <div class="col-xs-6">
                                    <h2>{{ rightPanel.data.firstName }}&nbsp;{{ rightPanel.data.lastName }}</h2>

                                    <strong>{{ rightPanel.data.title }}</strong>

                                    <div class="m-b-sm margin-top-20">
                                        <img alt="image" class="img-circle admin-panel-avatar" src="img/profile_pic_placeholder.png"/>
                                    </div>
                                </div>
                                <div class="col-xs-6 margin-top-20 text-center">
                                    <strong>
                                        Last Visited
                                    </strong>
                                    <p>
                                        Yesterday at 12:31 pm
                                    </p>
                                </div>
                            </div>
                            <div class="client-detail">
                                <div class="full-height-scroll" full-scroll>

                                    <strong>Last activity</strong>

                                    <ul class="list-group clear-list">
                                        <li class="list-group-item fist-item">
                                            <span class="pull-right"> June 10th, 09:00 pm </span>
                                            Edited process on banana manufacturing.
                                        </li>
                                        <li class="list-group-item">
                                            <span class="pull-right"> June 10th, 10:16 am </span>
                                            Signed-Off on bean counting process BC10-0021.
                                        </li>
                                        <li class="list-group-item">
                                            <span class="pull-right"> June 7th, 11:06 pm </span>
                                            Commented on status of Supply Chain organization.
                                        </li>
                                        <li class="list-group-item">
                                            <span class="pull-right"> June 1st, 12:00 am </span>
                                            Joined Provesoft.
                                        </li>
                                    </ul>
                                    <hr/>

                                    <div class="clients-list">
                                        <ul class="nav nav-tabs">
                                            <li ng-class="{'active' : usertab == 1}"><a ng-click="usertab = 1" ng-init="usertab = 1"><i class="fa fa-tasks"></i> Details</a></li>
                                            <li ng-class="{'active' : usertab == 2}"><a ng-click="usertab = 2"><i class="fa fa-key"></i> Organization Permissions</a></li>
                                        </ul>
                                        <div class="tab-content">
                                            <div id="usertab-1" class="tab-pane active" ng-show="usertab == 1">

                                                <div class="table-responsive margin-top-30">
                                                    <table class="table table-striped table-hover">
                                                        <tbody>
                                                        <tr>
                                                            <td><h4><strong>Primary Organization:</strong></h4></td>
                                                            <td>{{ rightPanel.data.primaryOrgName }}</td>
                                                            <td>
                                                                <button class="btn btn-sm btn-warning" type="button">
                                                                    <i class="fa fa-pencil"></i> Edit
                                                                </button>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><h4><strong>Alternate Organizations:</strong></h4></td>
                                                            <td>
                                                                <ul>
                                                                    <li ng-repeat="n in rightPanel.data.additionalOrgs">{{ n.name }}</li>
                                                                </ul>
                                                            </td>
                                                            <td>
                                                                <button class="btn btn-sm btn-warning" type="button">
                                                                    <i class="fa fa-pencil"></i> Edit
                                                                </button>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><h4><strong>Roles:</strong></h4></td>
                                                            <td>
                                                                <ul>
                                                                    <li ng-repeat="n in rightPanel.data.roles">{{ n.name }}</li>
                                                                </ul>
                                                            </td>
                                                            <td>
                                                                <button class="btn btn-sm btn-warning" type="button">
                                                                    <i class="fa fa-pencil"></i> Edit
                                                                </button>
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="tab-content">
                                            <div id="usertab-2" class="tab-pane active" ng-show="usertab == 2">

                                                <div class="table-responsive margin-top-30">
                                                    <table class="table table-hover">
                                                        <thead>
                                                        <tr>
                                                            <th>Organization</th>
                                                            <th class="text-center">View</th>
                                                            <th class="text-center">Revise</th>
                                                            <th class="text-center">Comment</th>
                                                            <th class="text-center">Admin</th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <tr ng-repeat="n in rightPanel.data.roles">
                                                            <td>{{ n.organizationName }}</td>
                                                            <td class="text-center">
                                                                <div ng-if="n.viewPerm" class="btn btn-primary">
                                                                    <span class="fa fa-check"></span>
                                                                </div>
                                                                <div ng-if="!n.viewPerm" class="btn btn-danger">
                                                                    <span class="fa fa-times"></span>
                                                                </div>
                                                            </td>
                                                            <td class="text-center">
                                                                <div ng-if="n.revisePerm" class="btn btn-primary">
                                                                    <span class="fa fa-check"></span>
                                                                </div>
                                                                <div ng-if="!n.revisePerm" class="btn btn-danger">
                                                                    <span class="fa fa-times"></span>
                                                                </div>
                                                            </td>
                                                            <td class="text-center">
                                                                <div ng-if="n.commentPerm" class="btn btn-primary">
                                                                    <span class="fa fa-check"></span>
                                                                </div>
                                                                <div ng-if="!n.commentPerm" class="btn btn-danger">
                                                                    <span class="fa fa-times"></span>
                                                                </div>
                                                            </td>
                                                            <td class="text-center">
                                                                <div ng-if="n.adminPerm" class="btn btn-primary">
                                                                    <span class="fa fa-check"></span>
                                                                </div>
                                                                <div ng-if="!n.adminPerm" class="btn btn-danger">
                                                                    <span class="fa fa-times"></span>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- New Organization panel -->
                        <div id="new-organization" class="tab-pane active" ng-show="rightPanel.view == 'new-org'">
                            <div class="row m-b-lg">
                                <div class="col-xs-12">
                                    <h2>New Organization</h2>
                                </div>
                            </div>
                            <div class="full-height-scroll" full-scroll>
                                <form class="form-horizontal">
                                    <div class="form-group">

                                        <label class="col-sm-2 control-label">
                                            Organization Name
                                        </label>
                                        <div class="col-sm-10 margin-bottom-30">
                                            <input ng-model="newOrg.name" class="form-control" type="text" />
                                        </div>

                                        <div class="row margin-bottom-30 padding-left-15">
                                            <label class="col-sm-2 control-label">
                                                Organization Description
                                            </label>
                                            <div class="col-sm-9 margin-bottom-20">
                                                <textarea ng-model="newOrg.description" rows="8"></textarea>
                                            </div>
                                        </div>

                                        <div class="col-sm-6 col-sm-offset-2">
                                            <button ng-click="createNewOrg()" class="btn btn-block btn-primary" type="button">
                                                Create Organization
                                            </button>
                                        </div>

                                    </div>
                                </form>
                            </div>
                        </div>
                        <!-- end new org -->

                        <!-- Existing organization panel -->
                        <div id="company-1" class="tab-pane active" ng-show="rightPanel.view == 'org'">
                            <div class="m-b-lg">
                                <h2>{{ rightPanel.data.name }}</h2>

                                <p class="margin-top-20">
                                    {{ rightPanel.data.description }}
                                </p>
                            </div>
                            <div class="client-detail">
                                <div class="full-height-scroll" full-scroll>

                                    <div class="ibox float-e-margins">
                                        <div class="ibox-title">
                                            <h3><strong>Members</strong></h3>
                                            <div>
                                                <form role="search">
                                                    <div class="form-group">
                                                        <div class="input-group">
                                                            <span class="input-group-btn">
                                                                <button class="btn btn-primary" type="button">
                                                                    <i class="fa fa-plus"> Add</i>
                                                                </button>
                                                            </span>
                                                            <input type="text" placeholder="Start typing to find user..." class="form-control" name="userSearch2" id="userSearch2">
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                        <div class="ibox-content">
                                            <div class="table-responsive">
                                                <table class="table table-hover">
                                                    <thead>
                                                    <tr>
                                                        <th>First Name</th>
                                                        <th>Last Name</th>
                                                        <th class="text-center">Organizational Permission</th>
                                                        <th></th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr>
                                                        <td><a ng-click="rightPanel.view = 1" class="client-link">Anthony</a></td>
                                                        <td><a ng-click="rightPanel.view = 1" class="client-link">Jackson</a></td>
                                                        <td class="text-center">
                                                            Supply Chain Admin
                                                        </td>
                                                        <td>
                                                            <button class="btn btn-sm btn-warning" type="button">
                                                                <i class="fa fa-pencil"></i> Edit
                                                            </button>
                                                            &nbsp;&nbsp;
                                                            <button class="btn btn-sm btn-danger" type="button">
                                                                <i class="fa fa-times"></i> Remove
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="new-role" class="tab-pane active" ng-show="rightPanel.view == 'new-role'">
                            <div class="row m-b-lg">
                                <div class="col-xs-12">
                                    <h2>New Role</h2>
                                </div>
                            </div>

                            <form class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">
                                        Role Name
                                    </label>
                                    <div class="col-sm-10 margin-bottom-30">
                                        <input ng-model="newRole.name" class="form-control" type="text" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">
                                        Organization
                                    </label>
                                    <div class="col-sm-10 margin-bottom-30 padding-left-15 ">
                                        <select chosen id="states" class="chosen-select" style="width:350px;" tabindex="4" ng-model="newRole.selectedOrg" ng-options="o.name for o in organizations">
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">
                                        Permissions
                                    </label>
                                    <div class="col-sm-10">
                                        <div class="col-md-8">
                                            <div class="table-responsive margin-left-15">
                                                <table class="table table-hover">
                                                    <colgroup>
                                                        <col style="width: 25%" />
                                                        <col style="width: 25%" />
                                                        <col style="width: 25%" />
                                                        <col style="width: 25%" />
                                                    </colgroup>
                                                    <thead>
                                                    <tr>
                                                        <th class="text-center">View</th>
                                                        <th class="text-center">Revise</th>
                                                        <th class="text-center">Comment</th>
                                                        <th class="text-center">Admin</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr>
                                                        <td class="text-center">
                                                            <input icheck type="checkbox" ng-model="newRole.viewPerm">
                                                        </td>
                                                        <td class="text-center">
                                                            <input icheck type="checkbox" ng-model="newRole.revisePerm">
                                                        </td>
                                                        <td class="text-center">
                                                            <input icheck type="checkbox" ng-model="newRole.commentPerm">
                                                        </td>
                                                        <td class="text-center">
                                                            <input icheck type="checkbox" ng-model="newRole.adminPerm">
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>

                            <div class="col-sm-6 col-sm-offset-2 margin-top-20">
                                <button ng-click="createNewRole()" class="btn btn-block btn-primary" type="button">
                                    Create Role
                                </button>
                            </div>
                        </div>

                        <div id="client9" class="tab-pane active" ng-show="rightPanel.view == 'role'">
                            <div class="row m-b-lg">
                                <div class="col-xs-12">
                                    <h2>Edit Role</h2>
                                </div>
                            </div>
                            <div class="full-height-scroll" full-scroll>

                                <div class="ibox float-e-margins">
                                    <div class="ibox-heading">
                                        <h4><strong>{{ rightPanel.data.name }}</strong></h4>
                                    </div>
                                    <div class="ibox-content">
                                        <div class="table-responsive margin-left-15">
                                            <table class="table table-hover">
                                                <colgroup>
                                                    <col style="width: 40%" />
                                                    <col style="width: 15%" />
                                                    <col style="width: 15%" />
                                                    <col style="width: 15%" />
                                                    <col style="width: 15%" />
                                                </colgroup>
                                                <thead>
                                                <tr>
                                                    <th>Organization</th>
                                                    <th class="text-center">View</th>
                                                    <th class="text-center">Revise</th>
                                                    <th class="text-center">Comment</th>
                                                    <th class="text-center">Admin</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td>{{ rightPanel.data.organizationName }}</td>
                                                    <td class="text-center">
                                                        <input icheck type="checkbox" ng-model="rightPanel.data.viewPerm">
                                                    </td>
                                                    <td class="text-center">
                                                        <input icheck type="checkbox" ng-model="rightPanel.data.revisePerm">
                                                    </td>
                                                    <td class="text-center">
                                                        <input icheck type="checkbox" ng-model="rightPanel.data.commentPerm">
                                                    </td>
                                                    <td class="text-center">
                                                        <input icheck type="checkbox" ng-model="rightPanel.data.adminPerm">
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                        <div class="col-sm-6 margin-top-20">
                                            <button class="btn btn-block btn-primary" type="button">
                                                Save Changes
                                            </button>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>